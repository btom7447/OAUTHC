import React from 'react';
import { Link } from 'react-router-dom';
import { Splide, SplideSlide } from '@splidejs/react-splide';
import '@splidejs/splide/dist/css/themes/splide-default.min.css';
import { useDoctors } from './DepartmentProvider';

const FilterCarousel = ({ departmentName }) => {
  const doctors = useDoctors();

  if (!doctors || doctors.length === 0) {
    return <div>Loading...</div>;
  }

  // Filter doctors by department
  const filteredDoctors = doctors.filter(doctor =>
    doctor.department.includes(departmentName)
  );

  return (
    <div className="doctors-carousel">
      <Splide
        options={{
          type: 'loop',
          autoplay: true,
          interval: 4000,
          pauseOnHover: true,
          arrows: false,
          pagination: true,
          gap: '20px',
          perPage: 3,
          breakpoints: {
              1024: { perPage: 3 },
              768: { perPage: 2 },
              576: { perPage: 1 },
          },
        }}
      >
      {filteredDoctors.map((doctor) => (
        <SplideSlide key={doctor.id}>
          <Link to={`/About/Find-Doctor/${encodeURIComponent(doctor.doctorName)}`}>
            <div className="professionals-box">
              <div className="professionals-image">
                <img src={doctor.doctorImage} alt={doctor.doctorName} />
              </div>
              <div className="professionals-caption">
                <h6>{doctor.doctorName}</h6>
                <div className="professionals-links">
                  {/* LINKEDIN */}
                  <a href={doctor.linkedIn} target='_blank' rel="noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
                      <path d="M12 0.477051C5.3725 0.477051 0 5.84955 0 12.4771C0 19.1046 5.3725 24.4771 12 24.4771C18.6275 24.4771 24 19.1046 24 12.4771C24 5.84955 18.6275 0.477051 12 0.477051ZM9.0625 17.4508H6.6325V9.6308H9.0625V17.4508ZM7.8325 8.6708C7.065 8.6708 6.56875 8.12705 6.56875 7.45455C6.56875 6.7683 7.08 6.2408 7.86375 6.2408C8.6475 6.2408 9.1275 6.7683 9.1425 7.45455C9.1425 8.12705 8.6475 8.6708 7.8325 8.6708ZM17.9375 17.4508H15.5075V13.1171C15.5075 12.1083 15.155 11.4233 14.2763 11.4233C13.605 11.4233 13.2063 11.8871 13.03 12.3333C12.965 12.4921 12.9488 12.7171 12.9488 12.9408V17.4496H10.5175V12.1246C10.5175 11.1483 10.4862 10.3321 10.4537 9.62955H12.565L12.6763 10.7158H12.725C13.045 10.2058 13.8288 9.4533 15.14 9.4533C16.7388 9.4533 17.9375 10.5246 17.9375 12.8271V17.4508Z" fill="white"/>
                    </svg>
                  </a>
                  {/* FACEBOOK */}
                  <a href={doctor.facebook} target='_blank' rel="noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
                      <path d="M12 0.477051C5.3725 0.477051 0 5.84955 0 12.4771C0 19.1046 5.3725 24.4771 12 24.4771C18.6275 24.4771 24 19.1046 24 12.4771C24 5.84955 18.6275 0.477051 12 0.477051ZM14.8425 8.76955H13.0388C12.825 8.76955 12.5875 9.0508 12.5875 9.42455V10.7271H14.8438L14.5025 12.5846H12.5875V18.1608H10.4588V12.5846H8.5275V10.7271H10.4588V9.63455C10.4588 8.06705 11.5463 6.7933 13.0388 6.7933H14.8425V8.76955Z" fill="white"/>
                    </svg>
                  </a>
                  {/* INSTAGRAM */}
                  <a href={doctor.instagram} target='_blank' rel="noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">
                        <path d="M17.4782 8.91067C17.3741 8.64098 17.2146 8.3961 17.0101 8.19178C16.8056 7.98747 16.5605 7.82827 16.2907 7.72442C15.9192 7.58683 15.5268 7.5141 15.1307 7.50942C14.472 7.47942 14.2745 7.47192 12.6057 7.47192C10.937 7.47192 10.7395 7.47942 10.0807 7.50942C9.68417 7.51396 9.29136 7.58669 8.91947 7.72442C8.64978 7.82855 8.40489 7.98801 8.20058 8.19254C7.99627 8.39707 7.83706 8.64212 7.73322 8.91192C7.59562 9.28342 7.5229 9.67579 7.51822 10.0719C7.48822 10.7307 7.48072 10.9282 7.48072 12.5969C7.48072 14.2657 7.48822 14.4632 7.51822 15.1219C7.52276 15.5185 7.59548 15.9113 7.73322 16.2832C7.83735 16.5529 7.99681 16.7977 8.20134 17.0021C8.40586 17.2064 8.65092 17.3656 8.92072 17.4694C9.29221 17.607 9.68459 17.6797 10.0807 17.6844C10.7395 17.7144 10.937 17.7207 12.6057 17.7207C14.2745 17.7207 14.472 17.7144 15.1307 17.6832C15.5272 17.679 15.92 17.6067 16.292 17.4694C16.5617 17.3653 16.8065 17.2058 17.0109 17.0013C17.2152 16.7968 17.3744 16.5517 17.4782 16.2819C17.6158 15.9104 17.6885 15.518 17.6932 15.1219C17.7232 14.4632 17.7295 14.2657 17.7295 12.5969C17.7295 10.9282 17.7232 10.7307 17.692 10.0719C17.6878 9.67545 17.6155 9.28264 17.4782 8.91067ZM12.6057 15.8069C11.9708 15.8069 11.3502 15.6187 10.8223 15.2659C10.2945 14.9132 9.88302 14.4119 9.64006 13.8253C9.39711 13.2388 9.33354 12.5934 9.4574 11.9707C9.58125 11.348 9.88698 10.776 10.3359 10.3271C10.7848 9.87818 11.3568 9.57246 11.9795 9.4486C12.6022 9.32474 13.2476 9.38831 13.8341 9.63127C14.4207 9.87423 14.922 10.2857 15.2747 10.8135C15.6275 11.3414 15.8157 11.962 15.8157 12.5969C15.8157 13.4483 15.4775 14.2647 14.8755 14.8667C14.2735 15.4687 13.4571 15.8069 12.6057 15.8069ZM15.942 10.0107C15.7936 10.0107 15.6486 9.96669 15.5253 9.88427C15.402 9.80186 15.3058 9.68473 15.2491 9.54768C15.1923 9.41064 15.1774 9.25984 15.2064 9.11435C15.2353 8.96887 15.3067 8.83523 15.4116 8.73034C15.5165 8.62545 15.6502 8.55402 15.7956 8.52508C15.9411 8.49614 16.0919 8.511 16.229 8.56776C16.366 8.62453 16.4832 8.72066 16.5656 8.84399C16.648 8.96733 16.692 9.11234 16.692 9.26067C16.692 9.45959 16.6129 9.65035 16.4723 9.791C16.3316 9.93165 16.1409 10.0107 15.942 10.0107ZM14.6895 12.5969C14.6895 13.009 14.5673 13.4119 14.3383 13.7546C14.1093 14.0973 13.7839 14.3643 13.4031 14.5221C13.0224 14.6798 12.6034 14.721 12.1992 14.6406C11.795 14.5602 11.4237 14.3618 11.1323 14.0704C10.8409 13.7789 10.6424 13.4076 10.562 13.0034C10.4816 12.5992 10.5229 12.1803 10.6806 11.7995C10.8383 11.4187 11.1054 11.0933 11.448 10.8643C11.7907 10.6354 12.1936 10.5132 12.6057 10.5132C13.1584 10.5132 13.6884 10.7327 14.0791 11.1235C14.4699 11.5143 14.6895 12.0443 14.6895 12.5969ZM12.6057 0.596924C10.2323 0.596924 7.91226 1.30071 5.93887 2.61929C3.96548 3.93786 2.42742 5.81201 1.51916 8.00472C0.610912 10.1974 0.373272 12.6102 0.836295 14.938C1.29932 17.2658 2.44221 19.404 4.12044 21.0822C5.79867 22.7604 7.93686 23.9033 10.2646 24.3663C12.5924 24.8294 15.0052 24.5917 17.1979 23.6835C19.3906 22.7752 21.2648 21.2372 22.5833 19.2638C23.9019 17.2904 24.6057 14.9703 24.6057 12.5969C24.6057 9.41432 23.3414 6.36208 21.091 4.11164C18.8406 1.86121 15.7883 0.596924 12.6057 0.596924V0.596924ZM18.8182 15.1732C18.8076 15.6918 18.7092 16.2049 18.527 16.6907C18.3664 17.1058 18.121 17.4827 17.8062 17.7975C17.4915 18.1122 17.1146 18.3576 16.6995 18.5182C16.2141 18.7002 15.7015 18.7987 15.1832 18.8094C14.5157 18.8394 14.3032 18.8469 12.6057 18.8469C10.9082 18.8469 10.6957 18.8394 10.0282 18.8094C9.50998 18.7987 8.9973 18.7002 8.51197 18.5182C8.09687 18.3576 7.71989 18.1122 7.40518 17.7975C7.09048 17.4827 6.845 17.1058 6.68447 16.6907C6.50242 16.2053 6.40394 15.6927 6.39322 15.1744C6.36322 14.5069 6.35572 14.2944 6.35572 12.5969C6.35572 10.8994 6.36322 10.6869 6.39322 10.0194C6.40354 9.50125 6.5016 8.98858 6.68322 8.50317C6.84374 8.08772 7.08935 7.71042 7.40428 7.39549C7.71922 7.08055 8.09652 6.83495 8.51197 6.67442C8.99737 6.4928 9.51005 6.39475 10.0282 6.38442C10.6957 6.35442 10.9082 6.34692 12.6057 6.34692C14.3032 6.34692 14.5157 6.35442 15.1832 6.38442C15.7014 6.39475 16.2141 6.4928 16.6995 6.67442C17.1147 6.83509 17.4917 7.08077 17.8065 7.39569C18.1212 7.71062 18.3666 8.08784 18.527 8.50317C18.709 8.9885 18.8075 9.50118 18.8182 10.0194C18.8482 10.6869 18.8557 10.8994 18.8557 12.5969C18.8557 14.2944 18.8482 14.5069 18.8182 15.1744V15.1732Z" fill="white"/>
                    </svg>
                  </a>
                </div>
              </div>
            </div>
          </Link>
        </SplideSlide>
        ))}
      </Splide>
    </div>
  );
};

export default FilterCarousel;